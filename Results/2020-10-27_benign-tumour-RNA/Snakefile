# ==============================================================================
# Configuration
# ==============================================================================
import pandas as pd
import os.path as path

PLOT_DIR = "Plots"

# ==============================================================================
# Meta Rules
# ==============================================================================
rule all:
	input:
		"results.genes.tsv",
		"results.transcripts.tsv",
		"all-samples.abundance.tsv",
		"sleuth-object.rds",

# ==============================================================================
# Rules
# ==============================================================================
rule tumour_dge:
	input:
		script = "dge.R",
	output:
		"results.genes.tsv",
		"results.transcripts.tsv",
		"all-samples.abundance.tsv",
		"sleuth-object.rds",
	shell:
		"Rscript {input.script}"

rule plot_erg:
	input:
		script = "plot-t2e.R",
		sleuth = "sleuth-object.rds",
		data = "t2e-comparison.transcripts.tsv"
	output:
		"outfile"
	shell:
		"python {input.script} {input.data} -o {output}"

rule sv_test_comp:
	input:
		script = "1sample-dge.sleuth.R",
	output:
		path.join("sleuth", "test_{test_ID}.genes.all.tsv"),
		path.join("sleuth", "test_{test_ID}.transcripts.all.tsv"),
		path.join("sleuth", "test_{test_ID}.genes.tested.tsv"),
		path.join("sleuth", "test_{test_ID}.transcripts.tested.tsv"),
		path.join("sleuth", "test_{test_ID}.sleuth-object.rds"),
	shell:
		"Rscript {input.script} {wildcards.test_ID}"
